# poc-print-server
This is a hapi server proving print services to https://github.com/AMPATH/ng-amrs
The server uses lpr (http://www.cups.org/documentation.php/options.html) cups command to print pdfs generated by https://github.com/GNOME/glabels (Be sure to compile from source the one provides by ubuntu lacks glabels-3-batch )
you can run 
```$ glabels-3-batch labelwithname.glabels --input=file.csv --output=out.pdf ```
this outputs a pdf out.pdf
then run 
```$ lpr out.pdf ```
to print with your default cups printer.If that is okay then run 
```$ npm install ``` to fetch dependencies and then
```$ npm start ```

Currently the server expects a json payload similar to 
```json
{
 "labelData":  [
  {
    "first_name": "Emmanuel",
    "last_name": "Nyachoke",
    "middle_name": "A",
    "identifier": "473305528-1",
    "gender": "male"
  }
]}

```
The order of the fields is important this will then create a CSV 

```
"Emmanuel","Nyachoke","A","473305528-1","male"
```
meaning in glabels

```
key 1 = Emmanuel
key 2 = Nyachoke
key 3 = A
key 4 = 473305528-1
key 5 = male
```
You can the bind them to your label in glabels like 
```
${1}
``` 
Instead of  the text for the particular widget

